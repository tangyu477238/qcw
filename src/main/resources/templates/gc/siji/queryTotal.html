<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<head th:include="gc/include :: header"></head>
<body class="gray-bg">






<div class="wrapper wrapper-content ">





	<div class="portlet light common-search-form">
		<div class="portlet-body">
			<form class="form-horizontal" action="#" id="searchUserFormId">

				<input type="hidden" id="deptId" name="deptId" th:value = "${deptId}">

				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label class="control-label col-md-2">付款单位</label>
							<div class="col-md-3">
								<input type="text" class="form-control" name="inforfee" size="15"
									   id="inforfee" >
							</div>
							<div class="col-md-1 ">
								<button type="button" onclick="showTable()" class="btn btn-primary queryButton">查询</button>
							</div>
						</div>
					</div>



				</div>


				<table class="table table-striped table-bordered table-hover table-condensed">
					<thead>
					<tr>

						<th>序号</th>
						<th > 付款单位</th>
						<th th:text="${bizMonth11}"></th>
						<th th:text="${bizMonth10}"></th>
						<th th:text="${bizMonth9}"></th>
						<th th:text="${bizMonth8}"></th>
						<th th:text="${bizMonth7}"></th>
						<th th:text="${bizMonth6}"></th>

						<th th:text="${bizMonth5}"></th>
						<th th:text="${bizMonth4}"></th>
						<th th:text="${bizMonth3}"></th>
						<th th:text="${bizMonth2}"></th>
						<th th:text="${bizMonth1}"></th>
						<th th:text="${bizMonth0}"></th>

						<th>合计 </th>
					</tr>
					</thead>

					<tbody id = "tdata">
					</tbody>

					<thead>
					<tr>

						<th></th>
						<th > 合计:</th>
						<th id="bizMonth11"></th>
						<th id="bizMonth10"></th>
						<th id="bizMonth9"></th>
						<th id="bizMonth8"></th>
						<th id="bizMonth7"></th>
						<th id="bizMonth6"></th>

						<th id="bizMonth5"></th>
						<th id="bizMonth4"></th>
						<th id="bizMonth3"></th>
						<th id="bizMonth2"></th>
						<th id="bizMonth1"></th>
						<th id="bizMonth0"></th>

						<th id="totalAmount"></th>
					</tr>
					</thead>
				</table>

			</form>
		</div>
	</div>


</div>
































<div th:include="gc/include::footer"></div>




<script type="text/javascript">
    $(function() {
        $("#startDate").val(getNowFirstDate());
        $("#endDate").val(getNowFormatDate());

        showTable();
    });



    //获取当前时间，格式YYYY-MM-DD
    function getNowFirstDate() {
        var date = new Date();
        var seperator1 = "-";
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = year + seperator1 + month + seperator1 + '01';
        return currentdate;
    }


    //获取当前时间，格式YYYY-MM-DD
    function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = year + seperator1 + month + seperator1 + strDate;
        return currentdate;
    }



    function showTable() {


        var inforfee = $("#inforfee").val();
        var deptId = $("#deptId").val();

        $.ajax({
            url : "/gc/siji/queryTotal?deptId="+deptId+"&inforfee="+inforfee,
            type : "GET",
            data : {
            },
            success : function(list) {
                $("#tdata").html("");
                var bizMonth11 = 0;var bizMonth10 = 0;var bizMonth9 = 0;
                var bizMonth8 = 0;var bizMonth7 = 0;var bizMonth6 = 0;
                var bizMonth5 = 0;var bizMonth4 = 0;var bizMonth3 = 0;
                var bizMonth2 = 0;var bizMonth1 = 0;var bizMonth0 = 0;

                var totalAmount = 0;
                for(var i = 0;i < list.length;i++){
                    var siItem = list[i];
                    var td = tdtemplate.replace('[tNum]',i+1);

                    td = td.replace('[inforfee]',siItem.inforfee);
                    td = td.replace('[bizMonth11]',siItem.bizMonth11);
                    td = td.replace('[bizMonth10]',siItem.bizMonth10);
                    td = td.replace('[bizMonth9]',siItem.bizMonth9);
                    td = td.replace('[bizMonth8]',siItem.bizMonth8);
                    td = td.replace('[bizMonth7]',siItem.bizMonth7);
                    td = td.replace('[bizMonth6]',siItem.bizMonth6);

                    td = td.replace('[bizMonth5]',siItem.bizMonth5);
                    td = td.replace('[bizMonth4]',siItem.bizMonth4);
                    td = td.replace('[bizMonth3]',siItem.bizMonth3);
                    td = td.replace('[bizMonth2]',siItem.bizMonth2);
                    td = td.replace('[bizMonth1]',siItem.bizMonth1);
                    td = td.replace('[bizMonth0]',siItem.bizMonth0);

                    td = td.replace('[totalAmount]',siItem.totalAmount);

                    bizMonth11 = bizMonth11 + siItem.bizMonth11;
                    bizMonth10 = bizMonth10 + siItem.bizMonth10;
                    bizMonth9 = bizMonth9 + siItem.bizMonth9;
                    bizMonth8 = bizMonth8 + siItem.bizMonth8;
                    bizMonth7 = bizMonth7 + siItem.bizMonth7;
                    bizMonth6 = bizMonth6 + siItem.bizMonth6;

                    bizMonth5 = bizMonth5 + siItem.bizMonth5;
                    bizMonth4 = bizMonth4 + siItem.bizMonth4;
                    bizMonth3 = bizMonth3 + siItem.bizMonth3;
                    bizMonth2 = bizMonth2 + siItem.bizMonth2;
                    bizMonth1 = bizMonth1 + siItem.bizMonth1;
                    bizMonth0 = bizMonth0 + siItem.bizMonth0;

                    totalAmount = totalAmount + siItem.totalAmount;
                    $("#tdata").append(td);
                }


                $("#bizMonth11").text(bizMonth11.toFixed(2));
                $("#bizMonth10").text(bizMonth10.toFixed(2));
                $("#bizMonth9").text(bizMonth9.toFixed(2));
                $("#bizMonth8").text(bizMonth8.toFixed(2));
                $("#bizMonth7").text(bizMonth7.toFixed(2));
                $("#bizMonth6").text(bizMonth6.toFixed(2));

                $("#bizMonth5").text(bizMonth5.toFixed(2));
                $("#bizMonth4").text(bizMonth4.toFixed(2));
                $("#bizMonth3").text(bizMonth3.toFixed(2));
                $("#bizMonth2").text(bizMonth2.toFixed(2));
                $("#bizMonth1").text(bizMonth1.toFixed(2));
                $("#bizMonth0").text(bizMonth0.toFixed(2));

                $("#totalAmount").text(totalAmount.toFixed(2));
            }
        });





    }





    var tdtemplate =
        '<tr>' +
        '<td>' + '[tNum]' + '</td>' +
        '<td>' + '[inforfee]' + '</td>' +
        '<td>' + '[bizMonth11]' + '</td>' +
        '<td>' + '[bizMonth10]' + '</td>' +
        '<td>' + '[bizMonth9]' + '</td>' +
        '<td>' + '[bizMonth8]' + '</td>' +
        '<td>' + '[bizMonth7]' + '</td>' +
        '<td>' + '[bizMonth6]' + '</td>' +
        '<td>' + '[bizMonth5]' + '</td>' +

        '<td>' + '[bizMonth4]' + '</td>' +
        '<td>' + '[bizMonth3]' + '</td>' +
        '<td>' + '[bizMonth2]' + '</td>' +
        '<td>' + '[bizMonth1]' + '</td>' +
        '<td>' + '[bizMonth0]' + '</td>' +
        '<td>' + '[totalAmount]' + '</td>' +
        '</tr>';





</script>


</body>
</html>
